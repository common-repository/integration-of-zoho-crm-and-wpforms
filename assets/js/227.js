"use strict";(self.webpackChunk_bitwpfzc=self.webpackChunk_bitwpfzc||[]).push([[227],{2227:(e,t,l)=>{l.r(t),l.d(t,{default:()=>c});var a=l(991),i=l(7953),r=l(1965),n=l(8871),o=l(5621);function s(e){var t=e.size,l=e.className,i=e.clr,r=void 0===i?"#0a8dff":i,n=e.style;return(0,o.jsx)("div",{className:l,style:(0,a.A)({height:t,width:t},n),children:(0,o.jsx)("svg",{version:"1.1",style:{height:t,width:t},x:"0px",y:"0px",viewBox:"0 0 80 80",xmlSpace:"preserve",children:(0,o.jsx)("path",{fill:r,d:"M10,40c0,0,0-0.4,0-1.1c0-0.3,0-0.8,0-1.3c0-0.3,0-0.5,0-0.8c0-0.3,0.1-0.6,0.1-0.9c0.1-0.6,0.1-1.4,0.2-2.1 c0.2-0.8,0.3-1.6,0.5-2.5c0.2-0.9,0.6-1.8,0.8-2.8c0.3-1,0.8-1.9,1.2-3c0.5-1,1.1-2,1.7-3.1c0.7-1,1.4-2.1,2.2-3.1 c1.6-2.1,3.7-3.9,6-5.6c2.3-1.7,5-3,7.9-4.1c0.7-0.2,1.5-0.4,2.2-0.7c0.7-0.3,1.5-0.3,2.3-0.5c0.8-0.2,1.5-0.3,2.3-0.4l1.2-0.1 l0.6-0.1l0.3,0l0.1,0l0.1,0l0,0c0.1,0-0.1,0,0.1,0c1.5,0,2.9-0.1,4.5,0.2c0.8,0.1,1.6,0.1,2.4,0.3c0.8,0.2,1.5,0.3,2.3,0.5 c3,0.8,5.9,2,8.5,3.6c2.6,1.6,4.9,3.4,6.8,5.4c1,1,1.8,2.1,2.7,3.1c0.8,1.1,1.5,2.1,2.1,3.2c0.6,1.1,1.2,2.1,1.6,3.1 c0.4,1,0.9,2,1.2,3c0.3,1,0.6,1.9,0.8,2.7c0.2,0.9,0.3,1.6,0.5,2.4c0.1,0.4,0.1,0.7,0.2,1c0,0.3,0.1,0.6,0.1,0.9 c0.1,0.6,0.1,1,0.1,1.4C74,39.6,74,40,74,40c0.2,2.2-1.5,4.1-3.7,4.3s-4.1-1.5-4.3-3.7c0-0.1,0-0.2,0-0.3l0-0.4c0,0,0-0.3,0-0.9 c0-0.3,0-0.7,0-1.1c0-0.2,0-0.5,0-0.7c0-0.2-0.1-0.5-0.1-0.8c-0.1-0.6-0.1-1.2-0.2-1.9c-0.1-0.7-0.3-1.4-0.4-2.2 c-0.2-0.8-0.5-1.6-0.7-2.4c-0.3-0.8-0.7-1.7-1.1-2.6c-0.5-0.9-0.9-1.8-1.5-2.7c-0.6-0.9-1.2-1.8-1.9-2.7c-1.4-1.8-3.2-3.4-5.2-4.9 c-2-1.5-4.4-2.7-6.9-3.6c-0.6-0.2-1.3-0.4-1.9-0.6c-0.7-0.2-1.3-0.3-1.9-0.4c-1.2-0.3-2.8-0.4-4.2-0.5l-2,0c-0.7,0-1.4,0.1-2.1,0.1 c-0.7,0.1-1.4,0.1-2,0.3c-0.7,0.1-1.3,0.3-2,0.4c-2.6,0.7-5.2,1.7-7.5,3.1c-2.2,1.4-4.3,2.9-6,4.7c-0.9,0.8-1.6,1.8-2.4,2.7 c-0.7,0.9-1.3,1.9-1.9,2.8c-0.5,1-1,1.9-1.4,2.8c-0.4,0.9-0.8,1.8-1,2.6c-0.3,0.9-0.5,1.6-0.7,2.4c-0.2,0.7-0.3,1.4-0.4,2.1 c-0.1,0.3-0.1,0.6-0.2,0.9c0,0.3-0.1,0.6-0.1,0.8c0,0.5-0.1,0.9-0.1,1.3C10,39.6,10,40,10,40z",children:(0,o.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 40 40",to:"360 40 40",dur:"0.6s",repeatCount:"indefinite"})})})})}var d=l(6987);function c(e){var t,l=e.formID,c=e.crmConf,u=e.setCrmConf,f=e.step,m=e.setstep,p=e.isLoading,h=e.setisLoading,_=e.setSnackbar,b=e.redirectLocation,y=e.isInfo,z=(0,i.useState)(!1),v=z[0],g=z[1],F=(0,i.useState)({dataCenter:"",clientId:"",clientSecret:""}),w=F[0],x=F[1],C=function(e){var t=(0,a.A)({},c),l=(0,a.A)({},w);l[e.target.name]="",t[e.target.name]=e.target.value,x(l),u(t)};return(0,o.jsxs)("div",{className:"btcd-stp-page",style:(0,a.A)({},{width:1===f&&900},{height:1===f&&"100%"}),children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Integration Name:","bitwpfzc")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"name",value:c.name,type:"text",placeholder:(0,r.__)("Integration Name...","bitwpfzc"),disabled:y}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Data Center:","bitwpfzc")})}),(0,o.jsxs)("select",{onChange:C,name:"dataCenter",value:c.dataCenter,className:"btcd-paper-inp w-9 mt-1",disabled:y,children:[(0,o.jsx)("option",{value:"",children:(0,r.__)("--Select a data center--","bitwpfzc")}),(0,o.jsx)("option",{value:"com",children:"zoho.com"}),(0,o.jsx)("option",{value:"eu",children:"zoho.eu"}),(0,o.jsx)("option",{value:"com.cn",children:"zoho.com.cn"}),(0,o.jsx)("option",{value:"in",children:"zoho.in"}),(0,o.jsx)("option",{value:"com.au",children:"zoho.com.au"})]}),(0,o.jsx)("div",{style:{color:"red"},children:w.dataCenter}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Homepage URL:","bitwpfzc")})}),(0,o.jsx)(n.A,{value:""+window.location.origin,setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:y}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Authorized Redirect URIs:","bitwpfzc")})}),(0,o.jsx)(n.A,{value:b||(null==(t=bitwpfzc)?void 0:t.redirect),setSnackbar:_,className:"field-key-cpy w-6 ml-0",readOnly:y}),(0,o.jsxs)("small",{className:"d-blk mt-5",children:[(0,r.__)("To get Client ID and SECRET , Please Visit","bitwpfzc")," ",(0,o.jsx)("a",{className:"btcd-link",href:"https://api-console.zoho."+((null==c?void 0:c.dataCenter)||"com")+"/",target:"_blank",rel:"noreferrer",children:(0,r.__)("Zoho API Console","bitwpfzc")})]}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Client id:","bitwpfzc")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"clientId",value:c.clientId,type:"text",placeholder:(0,r.__)("Client id...","bitwpfzc"),disabled:y}),(0,o.jsx)("div",{style:{color:"red"},children:w.clientId}),(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("b",{children:(0,r.__)("Client secret:","bitwpfzc")})}),(0,o.jsx)("input",{className:"btcd-paper-inp w-6 mt-1",onChange:C,name:"clientSecret",value:c.clientSecret,type:"text",placeholder:(0,r.__)("Client secret...","bitwpfzc"),disabled:y}),(0,o.jsx)("div",{style:{color:"red"},children:w.clientSecret}),!y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:function(){return(0,d.GV)(c,u,x,g,h,_)},className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:v,children:[v?(0,r.__)("Authorized âœ”","bitwpfzc"):(0,r.__)("Authorize","bitwpfzc"),p&&(0,o.jsx)(s,{size:"20",clr:"#022217",className:"ml-2"})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("button",{onClick:function(){m(2),!c.module&&(0,d.XP)(l,c,u,h,_),document.querySelector(".btcd-s-wrp").scrollTop=0},className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!v,children:[(0,r.__)("Next","bitwpfzc"),(0,o.jsx)("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]})]})}},6987:(e,t,l)=>{l.d(t,{EI:()=>o,GV:()=>p,X$:()=>m,XP:()=>c,hc:()=>n,lX:()=>u});var a=l(991),i=l(1965),r=l(247),n=function(e,t,l,i,r,n,o,c,u,f){var m=(0,a.A)({},l);if(0===t){if(c){var p=(0,a.A)({},u);p[e.target.name]="",f((0,a.A)({},p))}m[e.target.name]=e.target.value}else m.relatedlists||(m.relatedlists=[]),m.relatedlists[t-1][e.target.name]=e.target.value;switch(e.target.name){case"module":m=s(t,r,m,i,n,o);break;case"layout":m=d(t,r,m,i,n,o)}i((0,a.A)({},m))},o=function(e,t,l,a,i,r,n){var o;e&&((null==(o=a.default)||null==(o=o.relatedlists)||!o[a.module])&&refreshRelatedList(l,a,i,r,n));t(e)},s=function(e,t,l,i,r,n){var o,s=(0,a.A)({},l),c=0===e?s.module:s.relatedlists[e-1].module;if(s.relatedlists[e-1]||(s.relatedlists[e-1]={}),0===e?(s.layout="",s.actions={},s.field_map=[{formField:"",zohoFormField:""}],s.upload_field_map=[{formField:"",zohoFormField:""}],s.relatedlists=[]):(s.relatedlists[e-1].layout="",s.relatedlists[e-1].actions={},s.relatedlists[e-1].field_map=[{formField:"",zohoFormField:""}],s.relatedlists[e-1].upload_field_map=[{formField:"",zohoFormField:""}]),null!=(o=s.default.layouts)&&o[c]){var f,m=Object.keys(null==(f=s.default.layouts)?void 0:f[c]);1===m.length&&(0===e?s.layout=m[0]:s.relatedlists[e-1].layout=m[0],s=d(e,t,s,i,r,n))}else u(e,t,s,i,r,n);return s},d=function(e,t,l,i,r,n){var o,s,d,c,u=(0,a.A)({},l),m=0===e?u.module:u.relatedlists[e-1].module,p=0===e?u.layout:u.relatedlists[e-1].layout;0===e?(u.actions={},u.field_map=null!=u&&null!=(o=u.default)&&null!=(o=o.layouts)&&null!=(o=o[m])&&null!=(o=o[p])&&o.required?f(e,u):[{formField:"",zohoFormField:""}],u.upload_field_map=null!=u&&null!=(s=u.default)&&null!=(s=s.layouts)&&null!=(s=s[m])&&null!=(s=s[p])&&s.requiredFileUploadFields&&Object.keys(u.default.layouts[m][p].requiredFileUploadFields).length>0?f(e,u,!0):[{formField:"",zohoFormField:""}]):(u.relatedlists[e-1].actions={},u.relatedlists[e-1].field_map=null!=u&&null!=(d=u.default)&&null!=(d=d.layouts)&&null!=(d=d[m])&&null!=(d=d[p])&&d.required?f(e,u):[{formField:"",zohoFormField:""}],u.relatedlists[e-1].upload_field_map=null!=u&&null!=(c=u.default)&&null!=(c=c.layouts)&&null!=(c=c[m])&&null!=(c=c[p])&&c.requiredFileUploadFields&&Object.keys(u.default.layouts[m][p].requiredFileUploadFields).length>0?f(e,u,!0):[{formField:"",zohoFormField:""}]);return u},c=function(e,t,l,n,o){n(!0);var s={formID:e,id:t.id,dataCenter:t.dataCenter,clientId:t.clientId,clientSecret:t.clientSecret,tokenDetails:t.tokenDetails};(0,r.A)(s,"zcrm_refresh_modules").then((function(e){if(e&&e.success){var r=(0,a.A)({},t);r.default||(r.default={}),e.data.modules&&(r.default.modules=e.data.modules),e.data.tokenDetails&&(r.tokenDetails=e.data.tokenDetails),l((0,a.A)({},r)),o({show:!0,msg:(0,i.__)("Modules refreshed","bitwpfzc")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?o({show:!0,msg:(0,i.n)((0,i.__)("Modules refresh failed Cause: %s. please try again","bitwpfzc"),e.data.data||e.data)}):o({show:!0,msg:(0,i.__)("Modules refresh failed. please try again","bitwpfzc")});n(!1)})).catch((function(){return n(!1)}))},u=function(e,t,l,n,o,s){var d=(0,a.A)({},l),c=0===e?d.module:d.relatedlists[e-1].module;if(c){o(!0);var u={formID:t,module:c,dataCenter:d.dataCenter,clientId:d.clientId,clientSecret:d.clientSecret,tokenDetails:d.tokenDetails};(0,r.A)(u,"zcrm_refresh_layouts").then((function(l){var r;if(l&&l.success){if(l.data.layouts){d.default.layouts||(d.default.layouts={}),d.default.layouts[c]=l.data.layouts;var u,m=[].concat(Object.keys(l.data.layouts));if(1===m.length)0===e?(d.layout=m[0],d.field_map=f(e,d),Object.keys(l.data.layouts[m].fileUploadFields).length>0&&(d.upload_field_map=f(e,d,!0))):(d.relatedlists[e-1].layout=m[0],d.relatedlists[e-1].field_map=f(e,d),Object.keys(l.data.layouts[m].fileUploadFields).length>0&&(d.relatedlists[e-1].upload_field_map=f(e,d,!0))),null!=(u=d.default.tags)&&u[c]||refreshTags(e,t,d,n,o,s)}l.data.tokenDetails&&(d.tokenDetails=l.data.tokenDetails),n((0,a.A)({},d)),s({show:!0,msg:(0,i.__)("Layouts refreshed","bitwpfzc")})}else null!=l&&null!=(r=l.data)&&r.data||!l.success&&"string"===typeof l.data?s({show:!0,msg:(0,i.n)((0,i.__)("Layouts refresh failed Cause: %s. please try again","bitwpfzc"),l.data.data||l.data)}):s({show:!0,msg:(0,i.__)("Layouts refresh failed. please try again","bitwpfzc")});o(!1)})).catch((function(){return o(!1)}))}},f=function(e,t,l){var a=0===e?t.module:t.relatedlists[e-1].module,i=0===e?t.layout:t.relatedlists[e-1].layout;return l?t.default.layouts[a][i].requiredFileUploadFields.length>0?t.default.layouts[a][i].requiredFileUploadFields.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]:t.default.layouts[a][i].required.length>0?t.default.layouts[a][i].required.map((function(e){return{formField:"",zohoFormField:e}})):[{formField:"",zohoFormField:""}]},m=function(e){var t=null!=e&&e.field_map?e.field_map.filter((function(t){var l;return!t.formField&&t.zohoFormField&&-1!==(null==e||null==(l=e.default)||null==(l=l.layouts)||null==(l=l[e.module])||null==(l=l[e.layout])?void 0:l.required.indexOf(t.zohoFormField))})):[],l=null!=e&&e.upload_field_map?e.upload_field_map.filter((function(t){return!t.formField&&t.zohoFormField&&-1!==e.default.layouts[e.module][e.layout].requiredFileUploadFields.indexOf(t.zohoFormField)})):[],a=e.relatedlists.map((function(e){return e.field_map.filter((function(e){return!e.formField&&e.zohoFormField}))})),i=e.relatedlists.map((function(e){return e.upload_field_map.filter((function(e){return!e.formField&&e.zohoFormField}))}));return!(t.length>0||l.length>0||a.some((function(e){return e.length}))||i.some((function(e){return e.length})))},p=function(e,t,l,r,n,o){var s;if(e.dataCenter&&e.clientId&&e.clientSecret){n(!0);var d="https://accounts.zoho."+e.dataCenter+"/oauth/v2/auth?scope=ZohoCRM.modules.ALL,ZohoCRM.settings.ALL,ZohoCRM.users.Read,zohocrm.files.CREATE&response_type=code&client_id="+e.clientId+"&prompt=Consent&access_type=offline&redirect_uri="+(null==(s=bitwpfzc)?void 0:s.redirect)+"&state="+encodeURIComponent(window.location.href)+"/redirect",c=window.open(d,"zohoCRM","width=400,height=609,toolbar=off"),u=setInterval((function(){if(c.closed){clearInterval(u);var l={},s=!1,d=localStorage.getItem("__bitforms_zohoCRM");if(d&&(s=!0,l=JSON.parse(d),localStorage.removeItem("__bitforms_zohoCRM")),l.code&&!l.error&&l&&s){var f=(0,a.A)({},e);f.accountServer=l["accounts-server"],h(l,f,t,r,n,o)}else{var m=l.error?"Cause: "+l.error:"";o({show:!0,msg:(0,i.__)("Authorization failed","bitwpfzc")+" "+m+". "+(0,i.__)("please try again","bitwpfzc")}),n(!1)}}}),500)}else l({dataCenter:e.dataCenter?"":(0,i.__)("Data center cann't be empty","bitwpfzc"),clientId:e.clientId?"":(0,i.__)("Client ID cann't be empty","bitwpfzc"),clientSecret:e.clientSecret?"":(0,i.__)("Secret key cann't be empty","bitwpfzc")})},h=function(e,t,l,n,o,s){var d,c=(0,a.A)({},e);c.dataCenter=t.dataCenter,c.clientId=t.clientId,c.clientSecret=t.clientSecret,c.redirectURI=null==(d=bitwpfzc)?void 0:d.redirect,(0,r.A)(c,"zcrm_generate_token").then((function(e){return e})).then((function(e){if(e&&e.success){var r=(0,a.A)({},t);r.tokenDetails=e.data,l(r),n(!0),s({show:!0,msg:(0,i.__)("Authorized Successfully","bitwpfzc")})}else e&&e.data&&e.data.data||!e.success&&"string"===typeof e.data?s({show:!0,msg:""+(0,i.__)("Authorization failed Cause:","bitwpfzc")+(e.data.data||e.data)+". "+(0,i.__)("please try again","bitwpfzc")}):s({show:!0,msg:(0,i.__)("Authorization failed. please try again","bitwpfzc")});o(!1)}))}}}]);